!function(t){"use strict";t(document).ready(function(){function e(){t(".ut-tabs").each(function(){var e=t(this);e.data("ui-tabs")?e.tabs("refresh"):(e.find("ul").children("li").each(function(n){var a="tab-"+Math.random().toString(36).substr(2,9);t(this).children("a").attr("href","#"+a),e.children("div").eq(n).attr("id",a)}),e.tabs())})}function n(){t(".ut-accordion").each(function(){var e=t(this);e.data("ui-accordion")?e.accordion("refresh"):e.accordion({heightStyle:"content",collapsible:!0})})}t(document).on("sortstop","#menu-to-edit",function(e,n){setTimeout(function(){for(var e=0;e<n.item.context.classList.length;e+=1)if(n.item.context.classList[e].indexOf("menu-item-depth-")>=0){var a=n.item.context.classList[e].split("menu-item-depth-");if("0"!==a[1]&&n.item.data("megamenu")&&modal({type:"info",title:unite_js_translation.info,text:unite_js_translation.megamenu_level_message,autoclose:!1}),"1"===a[1]&&n.item.data("megamenu-column")){var i=n.item.attr("id").split("menu-item-"),o=t("#menu-item-settings-"+i[1]).find(".menu-item-data-parent-id").val();t("#menu-item-"+o).data("megamenu")||modal({type:"info",title:unite_js_translation.info,text:unite_js_translation.megamenu_column_parent_message,autoclose:!1})}if("1"!==a[1]&&n.item.data("megamenu-column")&&modal({type:"info",title:unite_js_translation.info,text:unite_js_translation.megamenu_column_level_message,autoclose:!1}),"2"!==a[1]&&n.item.data("megamenu-widget")&&modal({type:"info",title:unite_js_translation.info,text:unite_js_translation.megamenu_widget_level_message,autoclose:!1}),"2"===a[1]&&n.item.data("megamenu-widget")){var i=n.item.attr("id").split("menu-item-"),m="",o=t("#menu-item-settings-"+i[1]).find(".menu-item-data-parent-id").val();t(".menu-item-data-parent-id[value="+o+"]").length>=2&&(t(".menu-item-data-parent-id[value="+o+"]").each(function(){t("#menu-item-"+t(this).siblings(".menu-item-data-db-id").val()).data("megamenu-widget")&&m++}),m>=2&&modal({type:"info",title:unite_js_translation.info,text:unite_js_translation.megamenu_widget_amount_message,autoclose:!1}))}}},100)}),t("#add-mm-to-menu").on("click",function(e){wpNavMenu.registerChange(),function(e){if(!t("#menu-to-edit").length)return!1;var n=t("#mm-menu-parent-title"+e),a={},i=wpNavMenu.addMenuItemToBottom;a[e]=n.closest("label").getItemData("add-menu-item",e),wpNavMenu.addItemToMenu(a,i,function(){})}(t(this).data("menu-id")),e.stopImmediatePropagation(),e.preventDefault()}),t("#add-mm-button-to-menu").on("click",function(e){wpNavMenu.registerChange(),function(e){if(!t("#menu-to-edit").length)return!1;var n=t("#mm-button-title"+e),a={},i=wpNavMenu.addMenuItemToBottom;a[e]=n.closest("label").getItemData("add-menu-item",e),wpNavMenu.addItemToMenu(a,i,function(){modal({type:"info",title:unite_js_translation.info,text:unite_js_translation.button_added,autoclose:!1})})}(t(this).data("menu-id")),e.stopImmediatePropagation(),e.preventDefault()}),t("#add-mm-column-to-menu").on("click",function(e){wpNavMenu.registerChange(),function(e){if(!t("#menu-to-edit").length)return!1;var n=t("#mm-menu-column-title"+e),a={},i=wpNavMenu.addMenuItemToBottom;a[e]=n.closest("label").getItemData("add-menu-item",e),wpNavMenu.addItemToMenu(a,i,function(){console.log(a),modal({type:"info",title:unite_js_translation.info,text:unite_js_translation.megamenu_column_added_message,autoclose:!1})})}(t(this).data("menu-id")),e.stopImmediatePropagation(),e.preventDefault()}),t("#add-mm-image-to-menu").on("click",function(e){wpNavMenu.registerChange(),function(e){if(!t("#menu-to-edit").length)return!1;var n=t("#mm-menu-image-url"+e),a={},i=wpNavMenu.addMenuItemToBottom;a[e]=n.closest("label").getItemData("add-menu-item",e),wpNavMenu.addItemToMenu(a,i,function(){console.log(a),modal({type:"info",title:unite_js_translation.info,text:unite_js_translation.megamenu_image_added_message,autoclose:!1})})}(t(this).data("menu-id")),e.stopImmediatePropagation(),e.preventDefault()}),t("#add-widget-to-menu").on("click",function(e){wpNavMenu.registerChange(),function(){if(!t("#menu-to-edit").length)return!1;var e={},n=t("#ut-widget-for-menu").find('li input[type="checkbox"]:checked'),a=/menu-item\[([^\]]*)/,i=wpNavMenu.addMenuItemToBottom;if(!n.length)return!1;t(n).each(function(){var n=t(this),o=a.exec(n.attr("name")),m=void 0===o[1]?0:parseInt(o[1],10);this.className&&-1!=this.className.indexOf("add-to-top")&&(i=wpNavMenu.addMenuItemToTop),e[m]=n.closest("li").getItemData("add-menu-item",m)}),wpNavMenu.addItemToMenu(e,i,function(){n.removeAttr("checked")})}(),e.stopImmediatePropagation(),e.preventDefault()}),e(),n(),t(document).ajaxComplete(function(){n(),e(),t(".ut-minicolors").not(".ut-option-initialized").each(function(){var e=t(this),n=e.data("mode");"rgb"===n?e.minicolors({format:n,opacity:!0}):e.minicolors({format:n,letterCase:"uppercase"}),e.addClass("ut-option-initialized")}),t(".ut-gradient-picker").not(".ut-option-initialized").each(function(){var e=t(this);e.asColorPicker(),e.addClass("ut-option-initialized")}),t(".ut-numeric-slider-wrap").not(".ut-option-initialized").each(function(){var e=t(".ut-numeric-slider-hidden-input",this),n=t(".ut-numeric-slider-helper-input",this),a=t(".ut-numeric-slider",this),i=e.val();i||(i=e.data("min"),n.val(i)),a.slider({min:e.data("min"),max:e.data("max"),step:e.data("step"),value:i,slide:function(t,a){e.add(n).val(a.value).trigger("change")}}),n.tooltipster({trigger:"click"}).tooltipster("content",n.data("tooltip")).numeric({max:e.data("max")}),t(this).addClass("ut-option-initialized")})})})}(jQuery);